<%# We've already written a form for creating new products. 
Wouldn't it be nice if we could reuse that for edit and update? 
We can, using a feature called "partials" that allows you to reuse a view 
in multiple places. We can move the form into a file called app/views/products/_form.html.erb. 
The filename starts with an UNDERSCORE to denote this is a partial. %>

<% if product.errors.any? %>
  <div style="color: red;">
    <h2>
      <%= pluralize(product.errors.count, "error") %> prohibited this product from being saved:
    </h2>
    <ul>
      <% product.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
    </ul>
  </div>
<% end %>

<%# We also want to replace any instance variables with a local variable, 
which we can define when we render the partial. 
We'll do this by replacing @product with product. 
Using local variables allows partials to be reused multiple times on the same page 
with a different value each time. This comes in handy rendering lists of items like an index page.%>
<%# <%= form_with model: @product do |form| %>
<%= form_with model: product do |form| %>
  <div>
    <%= form.label :name %>
    <%= form.text_field :name %>
  </div>

  <div>
    <%= form.submit %>
  </div>
<% end %>